<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Event History Modeling: A Guide for Social Scientists</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Event History Modeling: A Guide for Social Scientists" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Event History Modeling: A Guide for Social Scientists" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Janet M. Box-Steffensmeier, Bradford S. Jones, David Darmofal">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="the-logic-of-event-history-analysis.html">
<link rel="next" href="the-cox-proportional-hazards-model.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="event-history-and-social-science.html"><a href="event-history-and-social-science.html"><i class="fa fa-check"></i><b>1</b> Event History and Social Science</a></li>
<li class="chapter" data-level="2" data-path="the-logic-of-event-history-analysis.html"><a href="the-logic-of-event-history-analysis.html"><i class="fa fa-check"></i><b>2</b> The Logic of Event History Analysis</a></li>
<li class="chapter" data-level="3" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html"><i class="fa fa-check"></i><b>3</b> Parametric Models for Single-Spell Duration Data</a><ul>
<li class="chapter" data-level="3.1" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html#un-data-in-r"><i class="fa fa-check"></i><b>3.1</b> UN Data in R</a><ul>
<li class="chapter" data-level="3.1.1" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html#table-3.1"><i class="fa fa-check"></i><b>3.1.1</b> Table 3.1</a></li>
<li class="chapter" data-level="3.1.2" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html#figure-3.1"><i class="fa fa-check"></i><b>3.1.2</b> Figure 3.1</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html#un-data-in-stata"><i class="fa fa-check"></i><b>3.2</b> UN Data in Stata</a><ul>
<li class="chapter" data-level="3.2.1" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html#table-3.1-1"><i class="fa fa-check"></i><b>3.2.1</b> Table 3.1</a></li>
<li class="chapter" data-level="3.2.2" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html#figure-3.1-1"><i class="fa fa-check"></i><b>3.2.2</b> Figure 3.1</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html#cabinet-data-in-r"><i class="fa fa-check"></i><b>3.3</b> Cabinet Data in R</a><ul>
<li class="chapter" data-level="3.3.1" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html#table-3.3"><i class="fa fa-check"></i><b>3.3.1</b> Table 3.3</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html#cabinet-data-in-stata"><i class="fa fa-check"></i><b>3.4</b> Cabinet Data in Stata</a><ul>
<li class="chapter" data-level="3.4.1" data-path="parametric-models-for-single-spell-duration-data.html"><a href="parametric-models-for-single-spell-duration-data.html#table-3.3-1"><i class="fa fa-check"></i><b>3.4.1</b> Table 3.3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-cox-proportional-hazards-model.html"><a href="the-cox-proportional-hazards-model.html"><i class="fa fa-check"></i><b>4</b> The Cox Proportional Hazards Model</a><ul>
<li class="chapter" data-level="4.1" data-path="the-cox-proportional-hazards-model.html"><a href="the-cox-proportional-hazards-model.html#cabinet-data-in-r-1"><i class="fa fa-check"></i><b>4.1</b> Cabinet Data in R</a><ul>
<li class="chapter" data-level="4.1.1" data-path="the-cox-proportional-hazards-model.html"><a href="the-cox-proportional-hazards-model.html#table-4.4"><i class="fa fa-check"></i><b>4.1.1</b> Table 4.4</a></li>
<li class="chapter" data-level="4.1.2" data-path="the-cox-proportional-hazards-model.html"><a href="the-cox-proportional-hazards-model.html#table-4.5"><i class="fa fa-check"></i><b>4.1.2</b> Table 4.5</a></li>
<li class="chapter" data-level="4.1.3" data-path="the-cox-proportional-hazards-model.html"><a href="the-cox-proportional-hazards-model.html#figure-4.1"><i class="fa fa-check"></i><b>4.1.3</b> Figure 4.1</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="the-cox-proportional-hazards-model.html"><a href="the-cox-proportional-hazards-model.html#cabinet-data-in-stata-1"><i class="fa fa-check"></i><b>4.2</b> Cabinet Data in Stata</a><ul>
<li class="chapter" data-level="4.2.1" data-path="the-cox-proportional-hazards-model.html"><a href="the-cox-proportional-hazards-model.html#table-4.4-1"><i class="fa fa-check"></i><b>4.2.1</b> Table 4.4</a></li>
<li class="chapter" data-level="4.2.2" data-path="the-cox-proportional-hazards-model.html"><a href="the-cox-proportional-hazards-model.html#table-4.5-1"><i class="fa fa-check"></i><b>4.2.2</b> Table 4.5</a></li>
<li class="chapter" data-level="4.2.3" data-path="the-cox-proportional-hazards-model.html"><a href="the-cox-proportional-hazards-model.html#figure-4.1-1"><i class="fa fa-check"></i><b>4.2.3</b> Figure 4.1</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Event History Modeling: A Guide for Social Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="parametric-models-for-single-spell-duration-data" class="section level1">
<h1><span class="header-section-number">3</span> Parametric Models for Single-Spell Duration Data</h1>
<p>This chapter makes use of two different datasets: data on the duration of UN peacekeeping operations from 1948-2001 (originally used in Green et al. 1998) and data on the duration of European cabinet governments from King et al. 1990. Each of the figures and tables are replicated in both R and Stata. Let’s start with the UN data in R and Stata first, and then move on to the cabinet data in R and Stata.</p>
<div id="un-data-in-r" class="section level2">
<h2><span class="header-section-number">3.1</span> UN Data in R</h2>
<p>Let’s load the packages we will need and the UN dataset. Be sure to set the working directory to</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#---- Packages </span>
<span class="kw">library</span>(foreign)
<span class="kw">library</span>(survival)
<span class="kw">library</span>(survminer)
<span class="kw">library</span>(flexsurv)
<span class="kw">library</span>(texreg)
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(SurvRegCensCov)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#-------Dataset</span>
un &lt;-<span class="st"> </span><span class="kw">read.dta</span>(<span class="st">&quot;~/Dropbox/github/liwu-gan.github.io/dta/UNFINAL.dta&quot;</span>)</code></pre></div>
<p>We create the survival object for our dependent variable, using the syntax Surv(time, event).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#--------Data prepation</span>

dv &lt;-<span class="st"> </span><span class="kw">Surv</span>(un<span class="op">$</span><span class="st">&#39;_t&#39;</span>, un<span class="op">$</span><span class="st">&#39;_d&#39;</span>)</code></pre></div>
<div id="table-3.1" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Table 3.1</h3>
<p>First we run the exponential and Weibull A.F.T models</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Exponential Model</span>

exp_mod &lt;-<span class="st"> </span><span class="kw">survreg</span>(dv <span class="op">~</span><span class="st"> </span>civil <span class="op">+</span><span class="st"> </span>interst, <span class="dt">data =</span> un, <span class="dt">dist =</span> <span class="st">&quot;exp&quot;</span>)

<span class="co"># Weibull A.F.T</span>

weib_mod &lt;-<span class="st"> </span><span class="kw">survreg</span>(dv <span class="op">~</span><span class="st"> </span>civil <span class="op">+</span><span class="st"> </span>interst, <span class="dt">data =</span> un, <span class="dt">dist =</span> <span class="st">&quot;weib&quot;</span>)</code></pre></div>
<p>The Weibull Prop. Hazards model is a little more involved to run, because the default in R is the accelerated failure time (A.F.T.) parameterization. To convert the Weibull A.F.T. to Prop. Hazards, we will use the ConvertWeibull function. Because this function does not calculate the intercept or standard errors, however, we will first have to create an intercept term manually by entering a vector of 1s in the dataset. We will then enter the intercept term as a covariate in the model.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">intercept &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">1</span>,<span class="dv">58</span>)

un<span class="op">$</span>intercept &lt;-<span class="st"> </span>intercept</code></pre></div>
<p>We run the Weibull A.F.T models with this intercept term. The ConvertWeibull function will drop the first term so we have to two identical models with the terms ordered differently to get the conversions for all the variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weib_mod1 &lt;-<span class="st"> </span><span class="kw">survreg</span>(dv <span class="op">~</span><span class="st"> </span><span class="dv">0</span> <span class="op">+</span><span class="st"> </span>civil <span class="op">+</span><span class="st"> </span>intercept <span class="op">+</span><span class="st"> </span>interst, <span class="dt">data =</span> un)

weib_mod2 &lt;-<span class="st"> </span><span class="kw">survreg</span>(dv <span class="op">~</span><span class="st"> </span><span class="dv">0</span> <span class="op">+</span><span class="st"> </span>intercept <span class="op">+</span><span class="st"> </span>civil <span class="op">+</span><span class="st"> </span>interst, <span class="dt">data =</span> un)

weib_mod1_ph &lt;-<span class="st"> </span><span class="kw">ConvertWeibull</span>(weib_mod1)

weib_mod2_ph &lt;-<span class="st"> </span><span class="kw">ConvertWeibull</span>(weib_mod2)</code></pre></div>
<p>We can extract the coefficients and standard errors from these two models, and delete the redundant rows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Extract the coefficients and standard errors</span>

weib_ph &lt;-<span class="st"> </span><span class="kw">rbind</span>(weib_mod1_ph<span class="op">$</span>vars, weib_mod2_ph<span class="op">$</span>vars)

<span class="co"># Delete rows that are redundant/unnecessary </span>
weib_ph &lt;-<span class="st"> </span>weib_ph[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>),]

weib_ph &lt;-<span class="st"> </span>weib_ph[<span class="kw">c</span>(<span class="st">&quot;intercept&quot;</span>, <span class="st">&quot;civil&quot;</span>, <span class="st">&quot;interst&quot;</span>, <span class="st">&quot;gamma&quot;</span>),]

weib_ph</code></pre></div>
<pre><code>##             Estimate         SE
## intercept -3.4599094 0.49528585
## civil      0.8879243 0.38320176
## interst   -1.4014415 0.51178181
## gamma      0.8068950 0.09988463</code></pre>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<table cellspacing="0" style="border: none;">
<caption align="top" style="margin-bottom:0.3em;">
Weibull Model of U.N. Peacekeeping Missions
</caption>
<tr>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;">
<b></b>
</th>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;">
<b>Exponential Model</b>
</th>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;">
<b>Weibull A.F.T.</b>
</th>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;">
<b>Weibull Prop. Hazards</b>
</th>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Constant
</td>
<td style="padding-right: 12px; border: none;">
4.35 (0.21)
</td>
<td style="padding-right: 12px; border: none;">
4.29 (0.27)
</td>
<td style="padding-right: 12px; border: none;">
-3.46 (0.50)
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Civil War
</td>
<td style="padding-right: 12px; border: none;">
-1.17 (0.36)
</td>
<td style="padding-right: 12px; border: none;">
-1.10 (0.45)
</td>
<td style="padding-right: 12px; border: none;">
0.89 (0.38)
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Interstate Conflict
</td>
<td style="padding-right: 12px; border: none;">
1.64 (0.50)
</td>
<td style="padding-right: 12px; border: none;">
1.74 (0.62)
</td>
<td style="padding-right: 12px; border: none;">
-1.40 (0.51)
</td>
</tr>
<tr>
<td style="border-top: 1px solid black;">
Shape Parameter
</td>
<td style="border-top: 1px solid black;">
1.00
</td>
<td style="border-top: 1px solid black;">
1.24
</td>
<td style="border-top: 1px solid black;">
0.81
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Log Likelihood
</td>
<td style="padding-right: 12px; border: none;">
-202.85
</td>
<td style="padding-right: 12px; border: none;">
-201.15
</td>
<td style="padding-right: 12px; border: none;">
-201.15
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid black;">
N
</td>
<td style="border-bottom: 2px solid black;">
54
</td>
<td style="border-bottom: 2px solid black;">
54
</td>
<td style="border-bottom: 2px solid black;">
54
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;" colspan="5">
<span style="font-size:0.8em"></span>
</td>
</tr>
</table>
</div>
<div id="figure-3.1" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Figure 3.1</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Using the Weibull A.F.T. model we ran earlier, we first calculate lambda for each conflict type, using the fact that lambda = exp(-beta&#39;x)</span>
lambda_civil =<span class="st"> </span><span class="kw">unname</span>(<span class="kw">exp</span>(<span class="op">-</span>(weib_mod<span class="op">$</span>coef[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>weib_mod<span class="op">$</span>coef[<span class="dv">2</span>])))

lambda_interst =<span class="st"> </span><span class="kw">unname</span>(<span class="kw">exp</span>(<span class="op">-</span>(weib_mod<span class="op">$</span>coef[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>weib_mod<span class="op">$</span>coef[<span class="dv">3</span>])))

lambda_icw &lt;-<span class="st"> </span><span class="kw">unname</span>(<span class="kw">exp</span>(<span class="op">-</span>(weib_mod<span class="op">$</span>coef[<span class="dv">1</span>])))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># We can generate the hazard rate for each covariate profile, knowing that h(t) = </span>
<span class="co"># lambda * p * (lambda * t)^(p-1)</span>

p &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">/</span>weib_mod<span class="op">$</span>scale
t &lt;-<span class="st"> </span>un<span class="op">$</span><span class="st">&#39;_t&#39;</span>

hazard_civil &lt;-<span class="st"> </span>lambda_civil <span class="op">*</span><span class="st"> </span>p <span class="op">*</span><span class="st"> </span>(lambda_civil <span class="op">*</span><span class="st"> </span>t)<span class="op">^</span>(p<span class="op">-</span><span class="dv">1</span>)

hazard_interstate &lt;-<span class="st"> </span>lambda_interst <span class="op">*</span><span class="st"> </span>p <span class="op">*</span><span class="st"> </span>(lambda_interst <span class="op">*</span><span class="st"> </span>t)<span class="op">^</span>(p<span class="op">-</span><span class="dv">1</span>)

hazard_icw &lt;-<span class="st"> </span>lambda_icw <span class="op">*</span><span class="st"> </span>p <span class="op">*</span><span class="st"> </span>(lambda_icw <span class="op">*</span><span class="st"> </span>t)<span class="op">^</span>(p<span class="op">-</span><span class="dv">1</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Plot hazard rates</span>

<span class="kw">ggplot</span>(<span class="dt">data =</span> un, <span class="kw">aes</span>(<span class="dt">x =</span> t)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="co">#geom_point(aes(y = hazard_civil)) +</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> hazard_civil, <span class="dt">colour =</span> <span class="st">&quot;Civil War&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="co">#geom_point(aes(y = hazard_interstate)) +</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> hazard_interstate, <span class="dt">colour =</span> <span class="st">&quot;Interstate Conflict&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="co">#geom_point(aes(y = hazard_icw)) +</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> hazard_icw, <span class="dt">colour =</span> <span class="st">&quot;Internationalized Civil War&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="dt">label =</span> <span class="st">&quot;Hazard Rates&quot;</span>) <span class="op">+</span><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Duration of U.N. Peacekeeping Missions&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">colour =</span> <span class="st">&quot;Type of Conflict&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Weibull Hazard Rates by Type of Conflict&quot;</span>)</code></pre></div>
<p><img src="event_history_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
</div>
</div>
<div id="un-data-in-stata" class="section level2">
<h2><span class="header-section-number">3.2</span> UN Data in Stata</h2>
<p>Let’s load the dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">/</span><span class="er">*</span><span class="st"> </span>Dataset is UNFINAL.DTA <span class="op">*</span><span class="er">/</span>

use <span class="st">&quot;~/Dropbox/github/liwu-gan.github.io/dta/UNFINAL.dta&quot;</span></code></pre></div>
<div id="table-3.1-1" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Table 3.1</h3>
<p>We can estimate and store each of the following models: exponential, Weibull A.F.T., and Weibull Prop. Hazards.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eststo clear

<span class="op">*</span><span class="st"> </span>Exponential model 

eststo<span class="op">:</span><span class="st"> </span>streg civil interst, <span class="kw">dist</span>(exp) time 

<span class="op">*</span><span class="st"> </span>Weibull model using accelerated failure time

eststo<span class="op">:</span><span class="st"> </span>streg civil interst, <span class="kw">dist</span>(weib) nohr 

<span class="op">*</span><span class="st"> </span>Weibull model using proportional hazards

eststo<span class="op">:</span><span class="st"> </span>streg civil interst, <span class="kw">dist</span>(weib) time </code></pre></div>
<p>Now we can generate the regression table for the three models.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">*</span><span class="st"> </span>Reset working directory to collect following output 

cd <span class="op">~</span><span class="er">/</span>Dropbox<span class="op">/</span>event_history<span class="op">/</span>rmd

<span class="op">*</span><span class="st"> </span>Generate regression table output 

esttab using ch3_exp_weib.html, replace <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">coeflabel</span>(  _t<span class="op">:</span>civil <span class="st">&quot;Civil War&quot;</span>    _t<span class="op">:</span>interst <span class="st">&quot;Interstate Conflict&quot;</span> <span class="op">/</span><span class="er">//</span>
<span class="st">                </span>_t<span class="op">:</span>_cons <span class="st">&quot;Constant&quot;</span>) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">title</span>(Weibull Model of U.N. Peacekeeping Missions) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">mtitles</span>(<span class="st">&quot;Exponential Model&quot;</span> <span class="st">&quot;Weibull A.F.T.&quot;</span> <span class="st">&quot;Weibull Prop. Hazards&quot;</span>) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">eqlabels</span>(<span class="st">&quot;&quot;</span>, none) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">b</span>(<span class="dv">2</span>) <span class="kw">se</span>(<span class="dv">2</span>) nostar <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">stats</span>(ll N, <span class="kw">label</span>(<span class="st">&quot;Log-Likelihood&quot;</span> <span class="st">&quot;&lt;em&gt;N&lt;/em&gt;&quot;</span>) <span class="kw">fmt</span>(<span class="dv">2</span> <span class="dv">0</span>)) </code></pre></div>
<div class="figure">
<img src="chapter3/ch3_exp_weib.png" />

</div>
</div>
<div id="figure-3.1-1" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Figure 3.1</h3>
<p>We generate hazard rates for each conflict type from the Weibull P.H. model.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">*</span>Weibull Model with P.H. Parameterization

streg civil interst, <span class="kw">dist</span>(weib) time

<span class="op">*</span><span class="st"> </span>First, note that lambda=<span class="kw">exp</span>(<span class="op">-</span>beta<span class="st">&#39;x). We can compute lambda for each conflict type:</span>

<span class="st">gen lambda_civil=exp(-(_b[_cons]+_b[civil]))</span>
<span class="st">gen lambda_interstate=exp(-(_b[_cons]+_b[interst]))</span>
<span class="st">gen lambda_icw=exp(-(_b[_cons]))</span>

<span class="st">* Second, note that h(t)=lambda*p*(lambda*t)^(p-1).  We can generate the hazard rate for each covariate profile:</span>
<span class="st">  </span>
<span class="st">gen haz_civil=lambda_civil*e(aux_p)*(lambda_civil*duration)^(e(aux_p)-1)</span>
<span class="st">gen haz_interstate=lambda_interstate*e(aux_p)*(lambda_interstate*duration)^(e(aux_p)-1)</span>
<span class="st">gen haz_icw=lambda_icw*e(aux_p)*(lambda_icw*duration)^(e(aux_p)-1)</span></code></pre></div>
<p>We are now ready to plot the hazard rates.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">twoway</span> (line haz_civil duration, sort <span class="kw">lpattern</span>(solid) <span class="kw">lcolor</span>(red)) (line haz_icw duration, sort <span class="kw">lpattern</span>(solid) <span class="kw">lcolor</span>(green)) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span>(line haz_interstate duration, sort <span class="kw">lpattern</span>(solid) <span class="kw">lcolor</span>(blue)), <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">legend</span>(<span class="kw">pos</span>(<span class="dv">3</span>) <span class="kw">col</span>(<span class="dv">1</span>) <span class="kw">ring</span>(<span class="dv">0</span>) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">lab</span>(<span class="dv">1</span> <span class="st">&quot;Civil War&quot;</span>) <span class="kw">lab</span>(<span class="dv">2</span> <span class="st">&quot;Internationalized Civil War&quot;</span>) <span class="kw">lab</span>(<span class="dv">3</span> <span class="st">&quot;Interstate Conflict&quot;</span>)) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">xtitle</span>(<span class="st">&quot;Duration of U.N. Peacekeeping Missions&quot;</span>) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">title</span>(<span class="st">&quot;Hazard Rates&quot;</span>, <span class="kw">position</span> (<span class="dv">11</span>)) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">scheme</span>(s2mono) <span class="kw">graphregion</span>(<span class="kw">color</span>(white) <span class="kw">icolor</span>(none)) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">saving</span>(cabcoxinthaz.gph, replace)

<span class="op">*</span><span class="st"> </span>Export graph as .png file.

graph export UNweibhaz.png, replace</code></pre></div>
<div class="figure">
<img src="chapter3/UNweibhaz.png" />

</div>
</div>
</div>
<div id="cabinet-data-in-r" class="section level2">
<h2><span class="header-section-number">3.3</span> Cabinet Data in R</h2>
<p>We begin by opening the cabinet dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#-------Dataset</span>
cabinet &lt;-<span class="st"> </span><span class="kw">read.dta</span>(<span class="st">&quot;~/Dropbox/github/liwu-gan.github.io/dta/cabinet.dta&quot;</span>)</code></pre></div>
<p>We create the survival object for our dependent variable, using the syntax Surv(time, event).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#--------Data prepation</span>

dv &lt;-<span class="st"> </span><span class="kw">Surv</span>(cabinet<span class="op">$</span>durat, cabinet<span class="op">$</span><span class="st">&#39;_d&#39;</span>)</code></pre></div>
<div id="table-3.3" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Table 3.3</h3>
<p>We run the Generalized Gamma and Weibull models.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Generalized Gamma model </span>

gg_mod &lt;-<span class="st"> </span><span class="kw">flexsurvreg</span>(dv <span class="op">~</span>invest <span class="op">+</span><span class="st"> </span>polar <span class="op">+</span><span class="st"> </span>numst <span class="op">+</span><span class="st"> </span>format <span class="op">+</span><span class="st"> </span>postelec <span class="op">+</span><span class="st"> </span>caretakr,
                      <span class="dt">data =</span> cabinet, <span class="dt">dist =</span> <span class="st">&quot;gengamma&quot;</span>)


<span class="co"># Weibull model </span>

weib_mod &lt;-<span class="st"> </span><span class="kw">survreg</span>(dv <span class="op">~</span>invest <span class="op">+</span><span class="st"> </span>polar <span class="op">+</span><span class="st"> </span>numst <span class="op">+</span><span class="st"> </span>format <span class="op">+</span><span class="st"> </span>postelec <span class="op">+</span><span class="st"> </span>caretakr,
                  <span class="dt">data =</span> cabinet)</code></pre></div>
<p>Let’s compare the results of our models.</p>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<table cellspacing="0" style="border: none;">
<caption align="top" style="margin-bottom:0.3em;">
Generalized Gamma Model of Cabinet Durations
</caption>
<tr>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;">
<b></b>
</th>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;">
<b>Generalized Gamma</b>
</th>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;">
<b>Weibull</b>
</th>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Constant
</td>
<td style="padding-right: 12px; border: none;">
2.96 (0.14)
</td>
<td style="padding-right: 12px; border: none;">
2.99 (0.13)
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Investiture
</td>
<td style="padding-right: 12px; border: none;">
-0.30 (0.11)
</td>
<td style="padding-right: 12px; border: none;">
-0.30 (0.11)
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Polarization
</td>
<td style="padding-right: 12px; border: none;">
-0.02 (0.01)
</td>
<td style="padding-right: 12px; border: none;">
-0.02 (0.01)
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Majority
</td>
<td style="padding-right: 12px; border: none;">
0.47 (0.10)
</td>
<td style="padding-right: 12px; border: none;">
0.46 (0.10)
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Formation
</td>
<td style="padding-right: 12px; border: none;">
-0.10 (0.03)
</td>
<td style="padding-right: 12px; border: none;">
-0.10 (0.03)
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Post-Election
</td>
<td style="padding-right: 12px; border: none;">
0.68 (0.11)
</td>
<td style="padding-right: 12px; border: none;">
0.68 (0.10)
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Caretaker
</td>
<td style="padding-right: 12px; border: none;">
-1.33 (0.21)
</td>
<td style="padding-right: 12px; border: none;">
-1.33 (0.20)
</td>
</tr>
<tr>
<td style="border-top: 1px solid black;">
Shape Parameter
</td>
<td style="border-top: 1px solid black;">
0.79
</td>
<td style="border-top: 1px solid black;">
0.77
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Scale Parameter
</td>
<td style="padding-right: 12px; border: none;">
0.92
</td>
<td style="padding-right: 12px; border: none;">
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Log Likelihood
</td>
<td style="padding-right: 12px; border: none;">
-1014.55
</td>
<td style="padding-right: 12px; border: none;">
-1014.62
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid black;">
N
</td>
<td style="border-bottom: 2px solid black;">
314
</td>
<td style="border-bottom: 2px solid black;">
314
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;" colspan="4">
<span style="font-size:0.8em"></span>
</td>
</tr>
</table>
</div>
</div>
<div id="cabinet-data-in-stata" class="section level2">
<h2><span class="header-section-number">3.4</span> Cabinet Data in Stata</h2>
<p>Let’s load the dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">/</span><span class="er">*</span><span class="st"> </span>Dataset is cabinet.dta <span class="op">*</span><span class="er">/</span>

use <span class="st">&quot;~/Dropbox/github/liwu-gan.github.io/dta/cabinet.dta&quot;</span></code></pre></div>
<div id="table-3.3-1" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Table 3.3</h3>
<p>We estimate the generalized gamma and Weibull models, and store the results.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">*</span><span class="st"> </span>Estimate generalized gamma model

eststo clear

eststo<span class="op">:</span><span class="st"> </span>streg invest polar numst format postelec caretakr, <span class="kw">dist</span>(ggamma) time

<span class="op">*</span><span class="st"> </span>Estimate weibull model 

eststo<span class="op">:</span><span class="st"> </span>streg invest polar numst format postelec caretakr, <span class="kw">dist</span>(weib) time</code></pre></div>
<p>We can generate the results in a table now.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">*</span><span class="st"> </span>Reset working directory to collect following output 

cd <span class="op">~</span><span class="er">/</span>Dropbox<span class="op">/</span>event_history<span class="op">/</span>rmd

<span class="op">*</span><span class="st"> </span>Generate regression table output 

esttab using ch3_gg_weib.html, replace <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">coeflabel</span>(  _t<span class="op">:</span>invest <span class="st">&quot;Investiture&quot;</span> _t<span class="op">:</span>polar <span class="st">&quot;Polarization&quot;</span> _t<span class="op">:</span>numst <span class="st">&quot;Majority&quot;</span> <span class="op">/</span><span class="er">//</span>
<span class="st">                </span>_t<span class="op">:</span>format <span class="st">&quot;Formation&quot;</span> _t<span class="op">:</span>postelec <span class="st">&quot;Post-Election&quot;</span> _t<span class="op">:</span>caretakr <span class="st">&quot;Caretaker&quot;</span> <span class="op">/</span><span class="er">//</span>
<span class="st">                </span>_t<span class="op">:</span>_cons <span class="st">&quot;Constant&quot;</span>) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">title</span>(Generalized Gamma Model of Cabinet Durations) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">mtitles</span>(<span class="st">&quot;Generalized Gamma&quot;</span> <span class="st">&quot;Weibull&quot;</span>) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">eqlabels</span>(<span class="st">&quot;&quot;</span>, none) <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">b</span>(<span class="dv">2</span>) <span class="kw">se</span>(<span class="dv">2</span>) nostar <span class="op">/</span><span class="er">//</span>
<span class="st">    </span><span class="kw">stats</span>(ll N, <span class="kw">label</span>(<span class="st">&quot;Log-Likelihood&quot;</span> <span class="st">&quot;&lt;em&gt;N&lt;/em&gt;&quot;</span>) <span class="kw">fmt</span>(<span class="dv">2</span> <span class="dv">0</span>)) nogaps</code></pre></div>
<div class="figure">
<img src="chapter3/ch3_gg_weib.png" />

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-logic-of-event-history-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="the-cox-proportional-hazards-model.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": false
});
});
</script>

</body>

</html>
